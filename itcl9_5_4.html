<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cybersecurity Lab: Spot the Red Flags</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .red-flag-zone {
            cursor: help;
            transition: all 0.3s ease;
            border-radius: 2px;
        }
        .red-flag-zone:hover {
            background-color: rgba(239, 68, 68, 0.1);
            outline: 2px dashed #ef4444;
        }
        .flag-found {
            background-color: rgba(239, 68, 68, 0.3) !important;
            outline: 2px solid #ef4444 !important;
            color: #b91c1c !important;
        }
        .scenario-card {
            display: none;
        }
        .scenario-card.active {
            display: block;
        }
        /* Custom scrollbar for reasoning list */
        #final-notes::-webkit-scrollbar, #feedback-list::-webkit-scrollbar {
            width: 8px;
        }
        #final-notes::-webkit-scrollbar-track, #feedback-list::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        #final-notes::-webkit-scrollbar-thumb, #feedback-list::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 4px;
        }
    </style>
</head>
<body class="bg-slate-50 min-h-screen font-sans text-slate-900">

    <div class="max-w-4xl mx-auto py-8 px-4">
        <!-- Header -->
        <header class="text-center mb-8">
            <h1 class="text-3xl font-bold text-indigo-700">Cybersecurity Lab 4.1.4</h1>
            <p class="text-slate-600 mt-2">Activity: Spot the Red Flags</p>
            <div class="mt-4 flex justify-center gap-2" id="progress-dots">
                <!-- Dots generated by JS -->
            </div>
        </header>

        <!-- Main Challenge Area -->
        <main id="game-container" class="bg-white rounded-xl shadow-lg border border-slate-200 overflow-hidden">
            
            <!-- Intro View -->
            <div id="intro-screen" class="p-8 text-center active scenario-card">
                <div class="w-20 h-20 bg-indigo-100 text-indigo-600 rounded-full flex items-center justify-center mx-auto mb-6">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04m17.236 0a11.959 11.959 0 01-2.25 10.55m-15.736 0a11.959 11.959 0 012.25-10.55M12 21.75c-2.676 0-5.216-.584-7.499-1.632m14.998 0A11.959 11.959 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z" />
                    </svg>
                </div>
                <h2 class="text-2xl font-bold mb-4">Investigator Training</h2>
                <p class="text-slate-600 mb-6 max-w-md mx-auto">
                    A cyber-criminal is trying to trick you! Click on the <strong>suspicious areas</strong> (Red Flags) in each scenario. You'll need to find all of them to move forward.
                </p>
                <button onclick="startGame()" class="bg-indigo-600 hover:bg-indigo-700 text-white px-8 py-3 rounded-lg font-semibold transition shadow-md">
                    Start Investigation
                </button>
            </div>

            <!-- Scenarios will be injected here -->
            <div id="scenario-viewer" class="scenario-card p-0">
                <div id="scenario-content"></div>
                
                <div class="bg-slate-50 p-6 border-t border-slate-200 flex flex-col sm:flex-row justify-between items-center gap-4">
                    <div id="flag-counter" class="text-sm font-bold text-slate-700 bg-white px-4 py-2 rounded-full border border-slate-200">
                        Flags: <span id="current-flags" class="text-indigo-600">0</span> / <span id="total-flags">0</span>
                    </div>
                    <div id="action-area" class="flex items-center gap-4">
                        <button onclick="showHint()" class="text-xs font-semibold text-slate-500 hover:text-indigo-600 flex items-center gap-1">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.443 1.103m-3.13 0c.552 0 1-.448 1-1s-.448-1-1-1-1 .448-1 1 .448 1 1 1zM12 17h.01" />
                            </svg>
                            Need a Hint?
                        </button>
                    </div>
                </div>
            </div>

            <!-- Interim Feedback Screen -->
            <div id="feedback-screen" class="scenario-card p-8 sm:p-12 text-center">
                <div class="w-16 h-16 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center mx-auto mb-6">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                </div>
                <h2 class="text-2xl font-bold text-slate-800 mb-2">Scenario Review</h2>
                <p class="text-slate-500 mb-6">Here is why those items were marked as red flags:</p>
                
                <div id="feedback-list" class="text-left bg-slate-50 p-6 rounded-lg mb-8 space-y-3 max-h-[300px] overflow-y-auto border border-slate-200">
                    <!-- Feedback items generated by JS -->
                </div>

                <button onclick="nextScenario()" class="bg-indigo-600 hover:bg-indigo-700 text-white px-8 py-3 rounded-xl font-bold shadow-lg transition-all">
                    Continue to Next Scenario
                </button>
            </div>

            <!-- Conclusion View -->
            <div id="end-screen" class="scenario-card p-8 sm:p-12 text-center">
                <div class="w-16 h-16 bg-emerald-100 text-emerald-600 rounded-full flex items-center justify-center mx-auto mb-6">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                    </svg>
                </div>
                <h2 class="text-3xl font-bold text-emerald-600 mb-2">Investigation Complete!</h2>
                <p class="text-slate-600 mb-8">Copy your report below to paste into your Schoology assignment.</p>
                
                <div class="mb-6">
                    <button id="copy-report-btn" onclick="copyToClipboard()" class="bg-indigo-600 hover:bg-indigo-700 text-white px-6 py-3 rounded-xl font-bold shadow-lg transition-all flex items-center gap-2 mx-auto">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3" />
                        </svg>
                        Copy Report to Clipboard
                    </button>
                    <p id="copy-success" class="text-emerald-600 text-xs mt-2 font-bold opacity-0 transition-opacity">Copied! You can now paste into Schoology.</p>
                </div>

                <div id="final-notes" class="text-left bg-slate-50 p-6 rounded-lg mb-8 space-y-6 max-h-[400px] overflow-y-auto border border-slate-200 shadow-inner"></div>
                
                <div class="flex flex-col sm:flex-row justify-center gap-4">
                    <button onclick="location.reload()" class="text-slate-500 hover:text-indigo-600 font-medium text-sm">Restart Activity</button>
                </div>
            </div>

        </main>
    </div>

    <!-- Modals -->
    <div id="reasoning-modal" class="fixed inset-0 bg-black/60 hidden flex items-center justify-center p-4 z-50">
        <div class="bg-white rounded-xl max-w-md w-full p-8 shadow-2xl transform transition-all">
            <h3 class="text-2xl font-bold mb-2 text-indigo-700">Evidence Collected!</h3>
            <p class="text-slate-600 mb-6">You found all the flags for this scenario. Briefly explain why this content was suspicious.</p>
            <textarea id="reason-input" class="w-full h-32 p-4 border-2 border-slate-100 bg-slate-50 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:bg-white outline-none transition-all" placeholder="E.g., I saw typos like 'custmer' and the URL used '.net' instead of '.com'..."></textarea>
            <button onclick="submitReasoning()" id="submit-btn" class="mt-6 w-full bg-indigo-600 hover:bg-indigo-700 text-white py-3 rounded-xl font-bold shadow-lg transition-all">Submit Findings</button>
        </div>
    </div>

    <!-- Hidden element for clipboard helper -->
    <textarea id="clipboard-helper" class="absolute left-[-9999px]" aria-hidden="true"></textarea>

    <script>
        const scenarios = [
            {
                type: "email",
                title: "Scenario 1: Urgent Security Alert",
                html: `
                    <div class="p-4 sm:p-8 bg-gray-100">
                        <div class="bg-white shadow-sm rounded border border-gray-300 max-w-lg mx-auto overflow-hidden">
                            <div class="p-4 border-b border-gray-200 text-sm bg-gray-50">
                                <div><strong>From:</strong> Security Team <span class="red-flag-zone px-1" data-id="1" title="Suspicious Sender Domain">verify@bank-off-america-secure.net</span></div>
                                <div><strong>Subject:</strong> <span class="red-flag-zone px-1" data-id="2" title="Urgent Pressure Tactics">URGENT: Your account will be DELETED in 2 hours</span></div>
                            </div>
                            <div class="p-6 text-gray-800 leading-relaxed">
                                <p class="mb-4">Dear Valued <span class="red-flag-zone px-1" data-id="3" title="Spelling Error (Custmer)">Custmer</span>,</p>
                                <p class="mb-4">We noticed a <span class="red-flag-zone px-1" data-id="4" title="Spelling Error (Suspicous)">suspicous login</span> from a new device. To protect your <span class="red-flag-zone px-1" data-id="5" title="Grammar Error (funds's)">funds's</span>, you must verify your identity immediately.</p>
                                <div class="text-center py-4">
                                    <button class="bg-blue-600 text-white px-8 py-3 rounded text-sm font-bold shadow hover:bg-blue-700">Click Here to Login</button>
                                </div>
                                <p class="text-[11px] text-gray-400 mt-6 text-center italic border-t pt-4">If you do not click, your <span class="red-flag-zone px-1" data-id="6" title="Personal Info Request">Social Security Number</span> will be flagged for fraud.</p>
                            </div>
                        </div>
                    </div>
                `,
                flagsCount: 6,
                flagDetails: [
                    "The email domain 'bank-off-america-secure.net' is fake. Real banks use '.com' and don't add extra words like '-secure'.",
                    "Creating an artificial deadline (2 hours) is a tactic to stop you from thinking clearly.",
                    "Professional organizations use spell-checkers. 'Custmer' is a clear red flag.",
                    "Another typo: 'suspicous' is missing an 'i'.",
                    "Bad grammar like 'funds's' suggests the email wasn't written by a professional company.",
                    "Legitimate companies will never ask for sensitive info like your SSN through a standard email."
                ],
                hints: [
                    "Check the 'From' address domain carefullyâ€”is it the official bank URL?",
                    "Scammers often create a sense of 'false urgency'.",
                    "Look for 'Custmer'â€”is that spelled correctly?",
                    "Check 'suspicous'â€”is there a missing letter?",
                    "Look for 'funds's'â€”that grammar doesn't seem right for a professional bank.",
                    "Banks will never ask for your full Social Security Number in a random email."
                ]
            },
            {
                type: "website",
                title: "Scenario 2: Too Good To Be True?",
                html: `
                    <div class="bg-white">
                        <div class="bg-slate-800 text-white p-2 flex items-center gap-2 text-[10px] sm:text-xs">
                            <div class="flex bg-slate-700 px-3 py-1 rounded-full items-center gap-2 w-full max-w-md">
                                <span class="text-red-400 font-bold whitespace-nowrap">âš  Not Secure</span>
                                <span class="red-flag-zone font-mono text-slate-300" data-id="1" title="Insecure HTTP Protocol">http://</span><span class="truncate">www.amazing-deals-low-price.tk/iphone15</span>
                            </div>
                        </div>
                        <div class="p-8 text-center border-b">
                            <h1 class="text-3xl font-black text-red-600 italic tracking-tighter">ðŸ”¥ MEGA SALE! ðŸ”¥</h1>
                            <p class="text-xl mt-2">iPhone 15 Pro - <span class="line-through text-slate-400">$999</span> <span class="font-bold text-green-600">$49.99!</span></p>
                            <div class="mt-8 grid grid-cols-1 sm:grid-cols-2 gap-4 max-w-md mx-auto">
                                <div class="red-flag-zone border-2 border-dashed border-yellow-400 p-4 rounded bg-yellow-50" data-id="2" title="Pop-up Scare/Scam">
                                    <p class="font-bold text-yellow-800">CONGRATULATIONS!</p>
                                    <p class="text-xs text-yellow-700">You are the 1,000,000th visitor! Claim your <span class="red-flag-zone underline" data-id="3" title="Fake Prize">FREE GIFT</span> now.</p>
                                </div>
                                <div class="border p-4 rounded bg-slate-50 flex items-center justify-center">
                                     <div class="text-slate-400 text-xs italic text-center">[attachment_0](attachment)</div>
                                </div>
                            </div>
                        </div>
                    </div>
                `,
                flagsCount: 3,
                flagDetails: [
                    "The site uses 'http://' instead of 'https://', meaning your connection is not encrypted.",
                    "Fake 'Visitor' contests are a common way to steal contact info or install tracking cookies.",
                    "Unrealistic prices (like a $50 iPhone) are almost always bait for a credit card scam."
                ],
                hints: [
                    "Look at the URL protocol. Is there an 'S' in HTTPS?",
                    "A pop-up claiming you are the 1,000,000th visitor is a classic scam.",
                    "Why would a brand new $1000 phone be sold for only $49?"
                ]
            },
            {
                type: "popup",
                title: "Scenario 3: Fake System Warning",
                html: `
                    <div class="p-12 bg-slate-900 relative min-h-[350px] flex items-center justify-center overflow-hidden">
                        <div class="absolute inset-0 opacity-10 bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')]"></div>
                        <div class="relative bg-gray-200 w-80 shadow-2xl border-2 border-gray-400 rounded-sm font-sans">
                            <div class="bg-blue-800 text-white p-1.5 text-xs flex justify-between items-center">
                                <span class="flex items-center gap-1"><span class="w-3 h-3 bg-blue-400 rounded-sm"></span> System Defender</span>
                                <span class="px-2">âœ•</span>
                            </div>
                            <div class="p-5 flex gap-4">
                                <div class="text-red-600 font-bold text-4xl">âš </div>
                                <div>
                                    <p class="font-bold text-sm text-red-700">THREATS DETECTED!</p>
                                    <p class="text-[11px] mt-2 text-slate-700 leading-tight">Your PC is infected with 14 <span class="red-flag-zone font-bold" data-id="1" title="Scareware">Trojan-Spyware</span> viruses. Do not restart!</p>
                                    <p class="text-[11px] mt-2 text-slate-700">Call our <span class="red-flag-zone underline text-blue-700" data-id="2" title="Fake Tech Support">Support Line</span> immediately at 1-800-PHISH-ME.</p>
                                </div>
                            </div>
                            <div class="p-2 border-t border-gray-300 text-right space-x-2">
                                <button class="bg-gray-300 border border-gray-500 px-4 py-1 text-xs hover:bg-gray-400">Scan Now</button>
                                <button class="red-flag-zone bg-gray-300 border border-gray-500 px-4 py-1 text-xs" data-id="3" title="Misleading Button">Exit</button>
                            </div>
                        </div>
                    </div>
                `,
                flagsCount: 3,
                flagDetails: [
                    "Real system alerts are general; they don't count '14 viruses' to specifically scare you (Scareware).",
                    "Fake Tech Support numbers are used to trick you into giving remote access to your computer.",
                    "Malicious pop-ups often trap you; clicking 'Exit' might actually trigger a download or a full-screen mode."
                ],
                hints: [
                    "Scareware often lists a specific number of 'viruses' to scare you.",
                    "Real antivirus software will never ask you to call a phone number.",
                    "Sometimes even the 'Exit' or 'Cancel' buttons on fake pop-ups are actually links to malware."
                ]
            },
            {
                type: "email",
                title: "Scenario 4: The Shared File",
                html: `
                    <div class="p-8 bg-indigo-50">
                        <div class="bg-white rounded-lg p-6 shadow-md max-w-lg mx-auto border-t-8 border-indigo-600">
                            <div class="flex items-center gap-3 mb-6">
                                <div class="w-12 h-12 bg-indigo-100 rounded-full flex items-center justify-center text-indigo-600 font-bold text-lg">JD</div>
                                <div>
                                    <p class="text-sm"><strong>John Doe</strong> shared a document</p>
                                    <p class="text-xs text-slate-500 font-mono">via <span class="red-flag-zone px-1" data-id="1" title="Spoofed Subdomain">docs.google.com-shared.xyz</span></p>
                                </div>
                            </div>
                            <div class="bg-slate-50 border border-slate-200 rounded-lg p-5 mb-6">
                                <div class="flex items-center gap-4">
                                    <div class="w-10 h-10 bg-blue-600 text-white flex items-center justify-center rounded shadow">W</div>
                                    <div>
                                        <p class="text-sm font-bold text-slate-800">Payroll_Update_Final.docx</p>
                                        <p class="text-xs text-red-500 font-semibold mt-1">Note: <span class="red-flag-zone" data-id="2" title="Suspicious Instructions">Must enable Macros</span> to view contents.</p>
                                    </div>
                                </div>
                            </div>
                            <button class="w-full bg-indigo-600 text-white py-3 rounded-lg font-bold shadow-md hover:bg-indigo-700 transition-colors">Open in Docs</button>
                        </div>
                    </div>
                `,
                flagsCount: 2,
                flagDetails: [
                    "The URL 'google.com-shared.xyz' is a subdomain trick. It belongs to 'shared.xyz', not Google.",
                    "Asking to 'Enable Macros' is the #1 way attackers get your computer to run malicious code automatically."
                ],
                hints: [
                    "Look at the address in the 'via' section. Is it google.com, or is there extra text like '-shared.xyz'?",
                    "Attackers often ask you to 'Enable Macros' because it lets them run malicious code on your computer."
                ]
            }
        ];

        let currentScenarioIndex = 0;
        let foundFlags = new Set();
        let userReasoning = [];
        let hintIndex = 0;

        function startGame() {
            document.querySelectorAll('.scenario-card').forEach(c => c.classList.remove('active'));
            document.getElementById('scenario-viewer').classList.add('active');
            renderProgress();
            loadScenario();
        }

        function renderProgress() {
            const container = document.getElementById('progress-dots');
            container.innerHTML = '';
            scenarios.forEach((_, i) => {
                const dot = document.createElement('div');
                dot.className = `w-3 h-3 rounded-full transition-all duration-500 ${i <= currentScenarioIndex ? 'bg-indigo-600 scale-110' : 'bg-slate-200'}`;
                container.appendChild(dot);
            });
        }

        function loadScenario() {
            const scenario = scenarios[currentScenarioIndex];
            const content = document.getElementById('scenario-content');
            content.innerHTML = `
                <div class="p-6 border-b bg-slate-50/50 flex justify-between items-center">
                    <h2 class="text-lg font-bold text-slate-700">${scenario.title}</h2>
                </div>
                <div class="relative">
                    ${scenario.html}
                </div>
            `;
            
            document.getElementById('total-flags').innerText = scenario.flagsCount;
            document.getElementById('current-flags').innerText = '0';
            foundFlags.clear();
            hintIndex = 0;

            document.querySelectorAll('.red-flag-zone').forEach(zone => {
                zone.addEventListener('click', function(e) {
                    e.stopPropagation();
                    if (!this.classList.contains('flag-found')) {
                        this.classList.add('flag-found');
                        foundFlags.add(this.dataset.id);
                        updateCounter();
                        this.style.transform = "scale(1.05)";
                        setTimeout(() => this.style.transform = "scale(1)", 100);
                    }
                });
            });
        }

        function showHint() {
            const currentHints = scenarios[currentScenarioIndex].hints;
            const message = currentHints[hintIndex % currentHints.length];
            const hintDisplay = document.createElement('div');
            hintDisplay.className = "fixed bottom-24 left-1/2 transform -translate-x-1/2 bg-slate-800 text-white px-4 py-2 rounded-lg text-xs shadow-xl animate-bounce z-40 max-w-[280px] text-center";
            hintDisplay.innerText = "ðŸ’¡ Hint: " + message;
            document.body.appendChild(hintDisplay);
            setTimeout(() => hintDisplay.remove(), 4000);
            hintIndex++;
        }

        function updateCounter() {
            const total = scenarios[currentScenarioIndex].flagsCount;
            document.getElementById('current-flags').innerText = foundFlags.size;
            if (foundFlags.size === total) {
                setTimeout(showReasoningModal, 600);
            }
        }

        function showReasoningModal() {
            document.getElementById('reasoning-modal').classList.remove('hidden');
            document.getElementById('reason-input').value = '';
            document.getElementById('reason-input').focus();
        }

        function submitReasoning() {
            const val = document.getElementById('reason-input').value.trim();
            if (!val) return;

            userReasoning.push({
                scenario: scenarios[currentScenarioIndex].title,
                notes: val
            });

            document.getElementById('reasoning-modal').classList.add('hidden');
            showFeedbackScreen();
        }

        function showFeedbackScreen() {
            const scenario = scenarios[currentScenarioIndex];
            const list = document.getElementById('feedback-list');
            list.innerHTML = '';
            
            scenario.flagDetails.forEach(detail => {
                const item = document.createElement('div');
                item.className = "flex gap-3 bg-white p-3 rounded border border-slate-200 shadow-sm text-sm";
                item.innerHTML = `<span class="text-red-500 font-bold">ðŸš©</span> <span class="text-slate-700 leading-snug">${detail}</span>`;
                list.appendChild(item);
            });

            document.querySelectorAll('.scenario-card').forEach(c => c.classList.remove('active'));
            document.getElementById('feedback-screen').classList.add('active');
        }

        function nextScenario() {
            if (currentScenarioIndex < scenarios.length - 1) {
                currentScenarioIndex++;
                renderProgress();
                loadScenario();
                document.querySelectorAll('.scenario-card').forEach(c => c.classList.remove('active'));
                document.getElementById('scenario-viewer').classList.add('active');
            } else {
                showEndScreen();
            }
        }

        function showEndScreen() {
            document.querySelectorAll('.scenario-card').forEach(c => c.classList.remove('active'));
            document.getElementById('end-screen').classList.add('active');
            
            const notesDiv = document.getElementById('final-notes');
            notesDiv.innerHTML = '';
            userReasoning.forEach((entry, idx) => {
                const item = document.createElement('div');
                item.className = "pb-4 border-b border-slate-200 last:border-0";
                item.innerHTML = `
                    <div class="flex items-center gap-2 mb-2">
                        <span class="bg-indigo-600 text-white text-[10px] w-5 h-5 flex items-center justify-center rounded-full">${idx + 1}</span>
                        <h4 class="font-bold text-slate-800">${entry.scenario}</h4>
                    </div>
                    <p class="text-sm text-slate-600 pl-7 italic">"${entry.notes}"</p>
                `;
                notesDiv.appendChild(item);
            });
        }

        function copyToClipboard() {
            const helper = document.getElementById('clipboard-helper');
            let reportText = "CYBERSECURITY LAB 4.1.4: SPOT THE RED FLAGS - INVESTIGATION REPORT\n";
            reportText += "===============================================================\n\n";
            userReasoning.forEach((entry, idx) => {
                reportText += `${idx + 1}. ${entry.scenario.toUpperCase()}\n`;
                reportText += `Findings: ${entry.notes}\n\n`;
            });
            reportText += "Investigation Complete.";

            helper.value = reportText;
            helper.select();
            helper.setSelectionRange(0, 99999);

            try {
                document.execCommand('copy');
                const btn = document.getElementById('copy-report-btn');
                const originalContent = btn.innerHTML;
                btn.innerHTML = 'âœ“ Copied to Clipboard';
                btn.classList.replace('bg-indigo-600', 'bg-emerald-600');
                setTimeout(() => {
                    btn.innerHTML = originalContent;
                    btn.classList.replace('bg-emerald-600', 'bg-indigo-600');
                }, 3000);
            } catch (err) {
                console.error('Failed to copy text: ', err);
            }
        }
    </script>
</body>
</html>
